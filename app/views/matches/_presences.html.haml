%table
  %tr
    %th Giocatore
    %th Bianchi
    %th Neri

  -Player.order("name ASC").each do |player|
    %tr
      %td=player.name
      -["white","black"].each do |team|
        -presence= Presence.where(player: player).where(match: match).first
        -if presence
          -if presence.team == team
            %td{style: "background-color: green"}
              %strong
                =button_to "Elimina", presence_path(presence), method: :delete
          -else
            %td
        -else
          %td
            =simple_form_for Presence.new do |f|
              =f.input :team, as: :hidden, input_html: {value: team}
              =f.input :match_id, as: :hidden, input_html: {value: match.id}
              =f.input :player_id, as: :hidden, input_html: {value: player.id}
              =f.submit team
    
%br
=link_to "Aggiungi giocatore", new_player_path
